# TCP MultiPlay Server

- Node.js 와 TCP 연결을 이용해 멀티플레이가 가능한 서버를 구현하였습니다!

## 서버의 목적

- TCP를 이용한 여러 유저들의 **위치 검증, 공유**를 통해 **멀티플레이 구현**
- 서버의 유지보수에 최적화된 구조 설계

### 기능

- 클라이언트는 서버의 주소 및 포트(default: 6325) 를 입력하여 게임에 입장할 수 있습니다.

- 게임에 입장한 클라이언트는 Device-ID 를 통해 구분되며, Database에 저장됩니다.

- 같은 Device-ID로 재접속 시, 종료 전 마지막 위치로 이동하게 됩니다.

- 게임에 참여한 유저들의 위치를 실시간으로 전달 받습니다

### 위치 검증

1. 클라이언트는 게임 접속 초기에 자신의 speed 값을 서버와 공유합니다

2. 클라이언트는 프레임마다 자신의 위치와 시간을 공유합니다

    2-1. 만약 방향이 달라졌다면 방향도 서버에 전달합니다.

3. 서버는 받은 방향과 경과시간(전달받은 시간)을 이용하여 계산하여 받은 위치와 오차범위를 확인합니다.

    3-1. 받은 위치와 계산된 위치가 오차범위(5%)를 넘지 않았다면 서버에 받은 위치를 적용합니다.

    3-2. 만약 오차범위를 넘겼을 경우 계산한 값을 서버에 적용합니다.

### 위치 동기화(+추측항법)

- 서버는 0.1초 단위로 유저들에게 유저의 방향과 최대지연시간을 기준으로 계산한 값을 전달합니다.
